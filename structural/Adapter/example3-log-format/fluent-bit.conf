[SERVICE]
    Flush         5
    Daemon        off
    Log_Level     info
    Parsers_File  parsers.conf

# Input: Read application log file
[INPUT]
    Name              tail
    Path              /var/log/app/application.log
    Parser            multiline
    Tag               app.logs
    Refresh_Interval  5
    Skip_Long_Lines   On
    DB                /tmp/fluent-bit-tail.db

# Filter: Add Kubernetes metadata
[FILTER]
    Name          modify
    Match         app.logs
    Add           app_name multi-format-app
    Add           environment production
    Add           pattern adapter

# Filter: Parse different log formats
[FILTER]
    Name          parser
    Match         app.logs
    Key_Name      log
    Parser        apache
    Parser        custom
    Parser        syslog
    Parser        csv
    Reserve_Data  On
    Preserve_Key  On

# Output: Convert to JSON format
[OUTPUT]
    Name          file
    Match         app.logs
    Path          /var/log/output/
    Format        json_lines

# Output: Also output to stdout for debugging
[OUTPUT]
    Name          stdout
    Match         app.logs
    Format        json_lines
