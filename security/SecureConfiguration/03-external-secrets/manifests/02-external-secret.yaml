# ExternalSecret - Fake Store에서 Secret 가져오기
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: db-credentials
  namespace: eso-test
spec:
  refreshInterval: 1h  # 1시간마다 동기화
  secretStoreRef:
    name: fake-store
    kind: SecretStore
  target:
    name: db-credentials-secret  # 생성될 K8s Secret 이름
    creationPolicy: Owner
  data:
    - secretKey: username     # K8s Secret의 키
      remoteRef:
        key: /db/username
    - secretKey: password
      remoteRef:
        key: /db/password
---
# API Key를 가져오는 ExternalSecret
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: api-credentials
  namespace: eso-test
spec:
  refreshInterval: 30m
  secretStoreRef:
    name: fake-store
    kind: SecretStore
  target:
    name: api-credentials-secret
    creationPolicy: Owner
  data:
    - secretKey: api-key
      remoteRef:
        key: /api/key
