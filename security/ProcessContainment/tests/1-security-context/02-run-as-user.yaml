# Test: runAsUser와 runAsGroup 설정
# 목적: 명시적 UID/GID 설정 검증
# 예상 결과: Pod 생성 성공, id 명령 실행 시 uid=1000, gid=2000 확인
# 검증: kubectl exec run-as-user-test -- id

apiVersion: v1
kind: Pod
metadata:
  name: run-as-user-test
  labels:
    test: security-context
    scenario: run-as-user
spec:
  securityContext:
    runAsUser: 1000   # UID 1000으로 실행
    runAsGroup: 2000  # GID 2000으로 실행
    fsGroup: 3000     # 볼륨 파일의 그룹을 3000으로 설정
  containers:
  - name: busybox
    image: busybox:1.36
    command: ['sh', '-c', 'sleep 3600']
    volumeMounts:
    - name: test-volume
      mountPath: /data
  volumes:
  - name: test-volume
    emptyDir: {}
